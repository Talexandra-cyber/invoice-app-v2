<!DOCTYPE html>
<html>
<head>
    <title>Simple Server Test</title>
</head>
<body>
    <h1>Simple Server Test</h1>
    
    <button onclick="testConnection()">Test Server Connection</button>
    <button onclick="testSearch()">Test Search</button>
    
    <div id="results" style="margin-top: 20px; padding: 20px; background: #f0f0f0; white-space: pre-wrap;"></div>

    <script>
        const BASE_URL = 'https://34fd8c802acf.ngrok-free.app';
        
        function showResult(message) {
            document.getElementById('results').textContent = message;
            console.log(message);
        }
        
        async function testConnection() {
            showResult('Testing connection...');
            
            try {
                console.log('Making fetch request to:', BASE_URL + '/status');
                const response = await fetch(BASE_URL + '/status', {
                    headers: {
                        'ngrok-skip-browser-warning': 'true'
                    }
                });
                console.log('Response:', response);
                
                const data = await response.json();
                console.log('Data:', data);
                
                showResult('✅ SUCCESS!\n\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                console.error('Error:', error);
                showResult('❌ ERROR: ' + error.message);
            }
        }
        
        async function testSearch() {
            showResult('Testing search...');
            
            try {
                const response = await fetch(BASE_URL + '/tools/search_patient_notes', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'ngrok-skip-browser-warning': 'true'
                    },
                    body: JSON.stringify({
                        query: 'anxiety',
                        case_sensitive: false
                    })
                });
                
                const data = await response.json();
                showResult('✅ SEARCH SUCCESS!\n\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                console.error('Search Error:', error);
                showResult('❌ SEARCH ERROR: ' + error.message);
            }
        }
        
        // Auto-test on page load
        window.onload = function() {
            console.log('Page loaded, testing connection...');
            testConnection();
        };
    </script>
</body>
</html> 